# å…¨å±€é…ç½® 
port: 7890
socks-port: 7891
redir-port: 7892
mixed-port: 7893
tproxy-port: 7894
allow-lan: true
bind-address: "*"
ipv6: false
unified-delay: true
tcp-concurrent: true
log-level: warning
find-process-mode: 'off'
# interface-name: en0
global-client-fingerprint: chrome
keep-alive-idle: 600
keep-alive-interval: 15
disable-keep-alive: false
profile:
  store-selected: true
  store-fake-ip: true

### DNSé…ç½®
dns:
  enable: true                      # å¯ç”¨ Clash å†…ç½® DNS
  listen: 0.0.0.0:1053              # DNS ç›‘å¬ç«¯å£ï¼Œ1053 é¿å…å’Œç³»ç»Ÿ 53 å†²çªï¼ˆæ—è·¯ç”±è¦ç”¨ 53 å¯ä»¥æ”¹æˆ 0.0.0.0:53ï¼‰
  ipv6: false                       # ç¦ç”¨ IPv6 DNSï¼Œé¿å…éƒ¨åˆ†ç½‘ç»œå¼‚å¸¸
  prefer-h3: true                   # ä¼˜å…ˆä½¿ç”¨ DoH over HTTP/3 (QUIC)ï¼Œé€Ÿåº¦æ›´å¿«ï¼ˆå–å†³äºä¸Šæ¸¸æ˜¯å¦æ”¯æŒï¼‰
  enhanced-mode: fake-ip            # Fake-IP æ¨¡å¼ï¼Œè§£å†³ DNS æ±¡æŸ“ï¼Œä¿è¯åˆ†æµå‡†ç¡®
  fake-ip-range: 198.18.0.1/16      # Fake-IP åœ°å€æ± ï¼ˆå®˜æ–¹æ¨èæ®µï¼Œé¿å…ä¸å…¬ç½‘å†²çªï¼‰

  use-hosts: true                   # å…è®¸ä½¿ç”¨ Clash é…ç½®é‡Œçš„ hosts
  use-system-hosts: true            # å…è®¸è¯»å–ç³»ç»Ÿ /etc/hosts

  fake-ip-filter-mode: blacklist    # Fake-IP è¿‡æ»¤æ¨¡å¼ï¼šé»‘åå•æ¨¡å¼ï¼ˆå‘½ä¸­çš„åŸŸåä¸èµ° fake-ipï¼‰
  fake-ip-filter:                   # ä¸èµ° fake-ip çš„åŸŸåï¼ˆä¿æŒçœŸå® IP è§£æï¼‰
    - "rule-set:private_domain,cn_domain"  # å†…ç½‘åŸŸå & ä¸­å›½åŸŸåç›´è¿
    - "rule-set:fakeip-filter,trackerslist" # å¸¸è§è¿½è¸ªå™¨/é»‘åå•åŸŸå
    - "+.msftconnecttest.com"       # Windows ç½‘ç»œæ£€æµ‹
    - "+.msftncsi.com"              # Windows ç½‘ç»œæ£€æµ‹
    - "time.*.com"                  # æ—¶é—´åŒæ­¥æœåŠ¡
    - "+.market.xiaomi.com"         # å°ç±³å¸‚åœº

  # å¯åŠ¨æ—¶ç”¨äºè§£æä»£ç†æœåŠ¡å™¨åŸŸåçš„é»˜è®¤ DNSï¼ˆé˜²æ­¢ä»£ç†èŠ‚ç‚¹æœ¬èº«æ— æ³•è§£æï¼‰
  default-nameserver:
    - 223.5.5.5                     # é˜¿é‡Œå…¬å…± DNSï¼ˆçº¯ IPï¼Œä¸ä¼šè¢«æ±¡æŸ“ï¼‰

  # è§£æä»£ç†æœåŠ¡å™¨åŸŸåæ—¶ç”¨çš„ DNSï¼ˆDoHï¼Œå®‰å…¨ï¼‰
  proxy-server-nameserver:
    - https://223.5.5.5/dns-query   # é˜¿é‡Œ DoH
    - https://dns.pub/dns-query     # 360 DoH

  # æ™®é€šåŸŸåè§£æç”¨çš„ DNSï¼ˆç›´è¿æŸ¥è¯¢ï¼Œä¼˜å…ˆå›½å†… DNSï¼Œä¿è¯å›½å†…è§£æå¿«ï¼‰
  nameserver:
    - https://223.5.5.5/dns-query   # é˜¿é‡Œ DoH
    - https://dns.pub/dns-query     # 360 DoH
    - https://dns.flymc.cc/dns-query # ç¬¬ä¸‰æ–¹ DoHï¼ˆå¯æ›¿æ¢ä¸ºä½ å–œæ¬¢çš„ï¼Œæ¯”å¦‚ Cloudflare 1.1.1.1ï¼‰

  # é’ˆå¯¹ç‰¹å®šè§„åˆ™é›†çš„ DNS ç­–ç•¥ï¼ˆæ‹¦æˆªæ— æ•ˆ/å¹¿å‘ŠåŸŸåï¼‰
  nameserver-policy:
    {'rule-set:reject_non_ip,reject_domainset,reject_non_ip_drop,reject_non_ip_no_drop': [rcode://success]}


### åŸŸåå—…æ¢
sniffer:
  enable: true
  sniff:
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true
    TLS:
      ports: [443, 8443]
    QUIC:
      ports: [443, 8443]
  force-domain:
    - "+.v2ex.com"
  skip-domain:
    - "+.baidu.com"

### ç­–ç•¥ç»„
proxy-groups:
  - name: ğŸš€æ—¶å…‰å¤ªæµ…1994
    type: select
    include-all: true
    proxies:
      - â™»ï¸è‡ªåŠ¨é€‰æ‹©
      - ğŸ”„æ•…éšœè½¬ç§»
      - DIRECT

  - name: â™»ï¸è‡ªåŠ¨é€‰æ‹©
    type: url-test
    include-all: true
    proxies: []  
    url: "https://cp.cloudflare.com/generate_204"
    interval: 180
    tolerance: 100

  - name: ğŸ”„æ•…éšœè½¬ç§»
    type: fallback
    include-all: true
    proxies: []
    url: "https://cp.cloudflare.com/generate_204"
    interval: 60

### è§„åˆ™é›†é…ç½®ï¼ˆä¿æŒåŸå‚è€ƒæ–‡ä»¶çš„è®¢é˜…è§„åˆ™ï¼‰
RuleSet_classical: &RuleSet_classical {type: http, behavior: classical, interval: 43200, format: text, proxy: ğŸš€æ—¶å…‰å¤ªæµ…1994}
RuleSet_domain: &RuleSet_domain {type: http, behavior: domain, interval: 43200, format: text, proxy: ğŸš€æ—¶å…‰å¤ªæµ…1994}
RuleSet_ipcidr: &RuleSet_ipcidr {type: http, behavior: ipcidr, interval: 43200, format: text, proxy: ğŸš€æ—¶å…‰å¤ªæµ…1994}
RuleSet_filter: &RuleSet_filter {type: http, behavior: domain, interval: 43200, format: mrs, proxy: ğŸš€æ—¶å…‰å¤ªæµ…1994}

rule-providers:
  fakeip-filter:
    <<: *RuleSet_filter
    url: https://testingcf.jsdelivr.net/gh/DustinWin/ruleset_geodata@mihomo-ruleset/fakeip-filter.mrs
    path: ./rule_set/other_ruleset/fakeip-filter.mrs
  cn:
    <<: *RuleSet_filter
    url: https://testingcf.jsdelivr.net/gh/DustinWin/ruleset_geodata@mihomo-ruleset/cn.mrs
    path: ./rule_set/other_ruleset/cn.mrs
  private:
    <<: *RuleSet_filter
    url: https://testingcf.jsdelivr.net/gh/DustinWin/ruleset_geodata@mihomo-ruleset/private.mrs
    path: ./rule_set/other_ruleset/private.mrs
  trackerslist:
    <<: *RuleSet_filter
    url: https://testingcf.jsdelivr.net/gh/DustinWin/ruleset_geodata@mihomo-ruleset/trackerslist.mrs
    path: ./rule_set/other_ruleset/trackerslist.mrs
  reject_non_ip_no_drop:
    <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/non_ip/reject-no-drop.txt
    path: ./rule_set/sukkaw_ruleset/reject_non_ip_no_drop.txt
  reject_non_ip_drop:
    <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/non_ip/reject-drop.txt
    path: ./rule_set/sukkaw_ruleset/reject_non_ip_drop.txt
  reject_non_ip:
    <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/non_ip/reject.txt
    path: ./rule_set/sukkaw_ruleset/reject_non_ip.txt
  reject_domainset:
    <<: *RuleSet_domain
    url: https://ruleset.skk.moe/Clash/domainset/reject.txt
    path: ./rule_set/sukkaw_ruleset/reject_domainset.txt
  reject_ip:
    <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/ip/reject.txt
    path: ./rule_set/sukkaw_ruleset/reject_ip.txt
  cdn_domainset:
    <<: *RuleSet_domain
    url: https://ruleset.skk.moe/Clash/domainset/cdn.txt
    path: ./rule_set/sukkaw_ruleset/cdn_domainset.txt
  cdn_non_ip:
    <<: *RuleSet_domain
    url: https://ruleset.skk.moe/Clash/non_ip/cdn.txt
    path: ./rule_set/sukkaw_ruleset/cdn_non_ip.txt
  stream_non_ip:
    <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/non_ip/stream.txt
    path: ./rule_set/sukkaw_ruleset/stream_non_ip.txt
  stream_ip:
    <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/ip/stream.txt
    path: ./rule_set/sukkaw_ruleset/stream_ip.txt
  ai_non_ip:
    <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/non_ip/ai.txt
    path: ./rule_set/sukkaw_ruleset/ai_non_ip.txt
  telegram_non_ip:
    <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/non_ip/telegram.txt
    path: ./rule_set/sukkaw_ruleset/telegram_non_ip.txt
  telegram_ip:
    <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/ip/telegram.txt
    path: ./rule_set/sukkaw_ruleset/telegram_ip.txt
  apple_cdn:
    <<: *RuleSet_domain
    url: https://ruleset.skk.moe/Clash/domainset/apple_cdn.txt
    path: ./rule_set/sukkaw_ruleset/apple_cdn.txt
  apple_services:
    <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/non_ip/apple_services.txt
    path: ./rule_set/sukkaw_ruleset/apple_services.txt
  apple_cn_non_ip:
    <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/non_ip/apple_cn.txt
    path: ./rule_set/sukkaw_ruleset/apple_cn_non_ip.txt
  microsoft_cdn_non_ip:
    <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/non_ip/microsoft_cdn.txt
    path: ./rule_set/sukkaw_ruleset/microsoft_cdn_non_ip.txt
  microsoft_non_ip:
    <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/non_ip/microsoft.txt
    path: ./rule_set/sukkaw_ruleset/microsoft_non_ip.txt
  download_domainset:
    <<: *RuleSet_domain
    url: https://ruleset.skk.moe/Clash/domainset/download.txt
    path: ./rule_set/sukkaw_ruleset/download_domainset.txt
  download_non_ip:
    <<: *RuleSet_domain
    url: https://ruleset.skk.moe/Clash/non_ip/download.txt
    path: ./rule_set/sukkaw_ruleset/download_non_ip.txt
  lan_non_ip:
    <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/non_ip/lan.txt
    path: ./rule_set/sukkaw_ruleset/lan_non_ip.txt
  lan_ip:
    <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/ip/lan.txt
    path: ./rule_set/sukkaw_ruleset/lan_ip.txt
  domestic_non_ip:
    <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/non_ip/domestic.txt
    path: ./rule_set/sukkaw_ruleset/domestic_non_ip.txt
  direct_non_ip:
    <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/non_ip/direct.txt
    path: ./rule_set/sukkaw_ruleset/direct_non_ip.txt
  global_non_ip:
    <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/non_ip/global.txt
    path: ./rule_set/sukkaw_ruleset/global_non_ip.txt
  domestic_ip:
    <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/ip/domestic.txt
    path: ./rule_set/sukkaw_ruleset/domestic_ip.txt
  china_ip:
    <<: *RuleSet_ipcidr
    url: https://testingcf.jsdelivr.net/gh/Seameee/override-hub@refs/heads/main/mergecnip/china_ip.txt
    path: ./rule_set/sukkaw_ruleset/china_ip.txt

### åˆ†æµè§„åˆ™
rules:
  - RULE-SET,reject_non_ip,REJECT
  - RULE-SET,reject_domainset,REJECT
  - RULE-SET,reject_non_ip_drop,REJECT-DROP
  - RULE-SET,reject_non_ip_no_drop,REJECT
  - RULE-SET,cdn_domainset,ğŸš€æ—¶å…‰å¤ªæµ…1994
  - RULE-SET,cdn_non_ip,ğŸš€æ—¶å…‰å¤ªæµ…1994
  - RULE-SET,stream_non_ip,ğŸš€æ—¶å…‰å¤ªæµ…1994
  - RULE-SET,telegram_non_ip,ğŸš€æ—¶å…‰å¤ªæµ…1994
  - RULE-SET,apple_cdn,DIRECT
  - RULE-SET,download_domainset,ğŸš€æ—¶å…‰å¤ªæµ…1994
  - RULE-SET,download_non_ip,ğŸš€æ—¶å…‰å¤ªæµ…1994
  - RULE-SET,microsoft_cdn_non_ip,DIRECT
  - RULE-SET,apple_cn_non_ip,DIRECT
  - RULE-SET,apple_services,ğŸš€æ—¶å…‰å¤ªæµ…1994
  - RULE-SET,microsoft_non_ip,ğŸš€æ—¶å…‰å¤ªæµ…1994
  - RULE-SET,ai_non_ip,ğŸš€æ—¶å…‰å¤ªæµ…1994
  - RULE-SET,global_non_ip,ğŸš€æ—¶å…‰å¤ªæµ…1994
  - RULE-SET,domestic_non_ip,DIRECT
  - RULE-SET,cn,DIRECT
  - RULE-SET,direct_non_ip,DIRECT
  - RULE-SET,lan_non_ip,DIRECT
  - RULE-SET,reject_ip,REJECT
  - RULE-SET,telegram_ip,ğŸš€æ—¶å…‰å¤ªæµ…1994,no-resolve
  - RULE-SET,stream_ip,ğŸš€æ—¶å…‰å¤ªæµ…1994
  - RULE-SET,lan_ip,DIRECT,no-resolve
  - RULE-SET,domestic_ip,DIRECT
  - RULE-SET,china_ip,DIRECT
  - MATCH,ğŸš€æ—¶å…‰å¤ªæµ…1994
