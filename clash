# ========== 基础设置 ==========
port: 7890
socks-port: 7891
allow-lan: true
mode: rule
log-level: info
external-controller: 0.0.0.0:9090

# ========== 策略组 ==========
proxy-groups:
  # 主出口
  - name: 故障转移
    type: fallback
    use:
      - mysub
    url: http://www.gstatic.com/generate_204
    interval: 600

  - name: 自动选择
    type: url-test
    use:
      - mysub
    url: http://www.gstatic.com/generate_204
    interval: 300

  - name: 手动切换
    type: select
    use:
      - mysub
    proxies:
      - 故障转移
      - 自动选择
      - DIRECT

  - name: 国内直连
    type: select
    proxies:
      - DIRECT
      - 故障转移

  - name: 国外代理
    type: select
    proxies:
      - 故障转移
      - 自动选择

# ========== 规则 ==========
rules:
  - GEOIP,CN,国内直连
  - MATCH,国外代理
